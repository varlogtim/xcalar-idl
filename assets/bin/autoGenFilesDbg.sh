#!/bin/bash

echo "// This file is auto-generated by MAC.sh or RUNME.SH" > assets/js/setup/constructorVersion.js
echo -n "var gConstructorVersion = '" >> assets/js/setup/constructorVersion.js
OS=`uname`
if [ "${OS}" = "Darwin"]; then
    echo -n `md5 assets/js/setup/constructor.js | cut -d' ' -f4` >> assets/js/setup/constructorVersion.js
else
    echo -n `md5sum assets/js/setup/constructor.js | cut -d' ' -f4` >> assets/js/setup/constructorVersion.js
fi
echo "';" >> assets/js/setup/constructorVersion.js
echo -n "var gGitVersion = '" >> assets/js/setup/constructorVersion.js
echo -n `git log --pretty=oneline --abbrev-commit -1 | cut -d' ' -f1` >> assets/js/setup/constructorVersion.js
echo "';" >> assets/js/setup/constructorVersion.js
